# astrbot_plugin_enhanced_memory（可能不太好用）
增强记忆插件 v1.0 - 完整使用指南

📖 插件简介

增强记忆插件是一个智能的记忆管理系统，能够帮助AI机器人记住重要的对话内容、用户偏好、个人事实等信息。通过AI技术，它可以自动提取重要信息、智能分类记忆、建立记忆关联，让你与AI的对话更加个性化和连贯。

🚀 快速开始
1. 安装插件
将插件文件夹放置在AstrBot的插件目录中，然后安装所需依赖：

bash
# 基础功能（必需）
pip install jieba networkx numpy pydantic

# 完整功能（推荐）
pip install faiss-cpu sentence-transformers transformers torch

2. 基础配置
在AstrBot的插件配置界面中，进行以下基本设置：

存储路径：记忆数据的保存位置（默认即可）

最大记忆数量：建议5000-10000条

启用自动提取：开启后AI会自动从对话中学习

启用AI集成：让AI在回复时参考相关记忆

🎯 基础功能使用
1. 添加记忆
text
/memo_add [记忆内容]
或
/记忆添加 [记忆内容]

示例：


/memo_add 用户喜欢喝咖啡，不喜欢喝茶

/memo_add 用户的生日是5月20日

2. 搜索记忆
   

/memo_search [关键词] [数量(可选)]
或
/记忆搜索 [关键词] [数量(可选)]

示例：

/memo_search 咖啡           # 搜索关于咖啡的记忆

/memo_search 生日 10        # 搜索生日相关记忆，最多10条

3. 删除记忆

/memo_delete [记忆ID]
或
/记忆删除 [记忆ID]

如何获取记忆ID？

在搜索结果中会显示记忆ID（前8位）

使用 /memo_stats 查看所有记忆

4. 查看记忆状态

/memo_stats
或
/记忆统计

这会显示：

记忆总数

各类记忆分布

平均重要性

系统状态

🤖 AI智能功能


1. AI智能提取记忆

/memo_ai_extract [对话内容]
或
/AI提取 [对话内容]

示例：

/memo_ai_extract 今天学到了很多关于机器学习的新知识，特别是深度学习方面的内容

AI会自动分析并提取重要信息作为记忆。

2. AI记忆梳理

/memo_organize [任务类型] [模型ID(可选)]
或
/记忆梳理 [任务类型] [模型ID(可选)]

任务类型：

all - 全部任务

categorize - 重新分类

summarize - 总结记忆库

find_duplicates - 检测重复

suggest_associations - 建议关联

suggest_importance - 调整重要性

sentiment_analysis - 情感分析

示例：


/memo_organize all                    # 执行所有梳理任务

/memo_organize categorize,summarize   # 只执行分类和总结

3. 应用梳理建议

/memo_apply_org
或
/应用梳理

在执行完AI梳理后，使用此命令应用AI的建议。

4. 查看可用AI模型
   
/memo_models
或
/可用模型

显示当前可用的AI模型列表。

🔗 记忆关联功能

1. 手动关联记忆

/memo_associate [记忆ID1] [记忆ID2]
或
/记忆关联 [记忆ID1] [记忆ID2]

示例：

/memo_associate abc123 def456

2. 查看关联记忆
   
在搜索时添加参数查看关联记忆：

/memo_search 咖啡 include_associated=true

📊 数据管理

1. 导出记忆

/memo_export [格式]
或
/记忆导出 [格式]

格式选项：

json - JSON格式（推荐）

csv - CSV表格格式

示例：


/memo_export json
/memo_export csv

2. 导入记忆

/memo_import [文件路径] [格式]
或
/记忆导入 [文件路径] [格式]

示例：


/memo_import memories_backup.json json

⚙️ 高级配置指南

1. 自动提取设置
   
在插件配置中调整：

最低重要性阈值：0.3（建议值）

值越高，只有更重要信息会被记住

值越低，更多信息会被自动记忆

提取关键词：开启

自动为每条记忆提取关键词，提高搜索准确性

2. AI模型配置
   
使用框架模型：开启

主要处理模型：选择你常用的AI模型

自动提取模型：（可选）专门用于记忆提取的模型

回退到默认模型：开启（确保功能稳定）

3. 记忆分类权重
   
可以调整不同类型记忆的重要性：


{
  "事实": 0.8,        // 客观信息
  "观点": 0.6,        // 主观看法
  "用户偏好": 1.0,     // 用户喜好（最重要）
  "事件": 0.7,        // 时间相关事件
  "关系": 0.9,        // 人际关系
  "其他": 0.3         // 其他内容
}

🎪 使用场景示例

场景1：个人助理
目标：让AI记住你的生活习惯和偏好


你：我喜欢在早上喝美式咖啡，不加糖
AI：（自动记忆）→ 已记录用户咖啡偏好

你：我对花生过敏
AI：（自动记忆）→ 已记录用户过敏信息

你：每周三我要去健身房
AI：（自动记忆）→ 已记录用户日程习惯
后续对话：


你：今天有什么建议？
AI：考虑到您周三要去健身房，建议早餐多吃蛋白质。另外记得您喜欢美式咖啡，早上可以来一杯提神。

场景2：学习伙伴
目标：记住学习进度和知识点


/memo_add 用户正在学习Python编程
/memo_add 用户已经掌握了函数和类的基本概念
/memo_add 用户对装饰器的理解还不够深入
后续对话：


你：我应该学习什么？
AI：根据您的学习记录，建议继续深入学习Python装饰器，这是您之前觉得有难度的部分。

场景3：项目协作
目标：记住项目细节和分工


/memo_add 项目A的截止日期是12月31日
/memo_add 用户负责项目A的前端开发
/memo_add 项目需要使用React框架

🔧 故障排除

1. 记忆搜索不到
   
问题：使用/memo_search找不到记忆

解决方案：

检查记忆是否成功添加（使用/memo_stats）

尝试更简单的关键词

确保自动提取功能已开启

2. AI功能不可用
   
问题：AI梳理、提取等功能报错

解决方案：

检查AI模型配置是否正确

确认已安装必要的依赖

查看日志文件获取详细错误信息

3. 性能问题
   
问题：插件运行缓慢

解决方案：

减少最大记忆数量

关闭不必要的AI功能

定期使用/memo_organize find_duplicates清理重复记忆

4. 依赖检查

/memo_deps
或
/依赖检查
查看所需依赖的安装状态。

💡 最佳实践
1. 记忆质量
具体明确：避免模糊表述

相关信息：包含上下文关系

定期整理：每月使用AI梳理一次

2. 搜索技巧
使用具体关键词而非抽象概念

结合多个关键词缩小范围

利用关联记忆发现相关信息

3. AI协作
让AI自动提取，人工审核重要记忆

定期使用AI梳理保持记忆库整洁

根据使用反馈调整重要性权重

🆘 获取帮助

1. 帮助命令
   
/memo_help
或
/记忆帮助

查看完整的命令列表和使用示例。

4. 系统信息
   
/memo_stats        # 记忆系统状态
/memo_deps         # 依赖状态
/memo_model_info   # AI模型信息

🎊 开始使用吧！
现在你已经了解了增强记忆插件的所有功能，可以开始：

添加一些测试记忆，熟悉基本操作

开启自动提取，让AI在对话中学习

尝试AI梳理，优化记忆库结构

定期导出备份，防止数据丢失

记住，一个好的记忆系统需要时间培养。随着使用，你会发现AI越来越了解你，对话也越来越个性化！

祝你使用愉快！ 🚀


# 支持

[帮助文档](https://astrbot.app)
